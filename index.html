<html lang="fr">
  <meta charset="utf8">
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {

        var C = 180000;
        var T = 1.2/100;
        var N = 20*12;

        var assurance = 30; // 30€ par mois pour l'assurance

        var M = (C*T/12)/(1-Math.pow((1+T/12), -N));
        var mydata = [['Mois', 'Amortissement', 'Intérêts', 'Assurance']];
        var interets, capital, amortissement;
        capital = C;
        for (var i=0; i <= N; i++) {
          interets = capital * T / 12; // intérêts mensuels
          amortissement = M - interets;
          capital -= amortissement;
          mydata.push([i, amortissement, interets, assurance]);
        }
        console.log(mydata);
        var data = google.visualization.arrayToDataTable(mydata);

        var options = {
          title: 'Simulateur sur '+N+' mois - mensualité de '+M.toLocaleString()+' € + '+ assurance+' € d’assurance',
          vAxis: {title: 'Accumulated Rating'},
          isStacked: true
        };

        var chart = new google.visualization.SteppedAreaChart(document.getElementById('chart_div'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>
